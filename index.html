<!DOCTYPE html>
<html>
<head>
	<title>Jacky cheung's page</title>
	<meta charset="utf-8">
	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1'>
	<link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/css/swiper.min.css'>
	<link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'>
	<link rel="stylesheet" href='styles/style.css'>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/js/swiper.min.js"></script>
	<style>
	</style>
</head>
<body>
<div class='swiper-container'>
	<div class='swiper-wrapper'>
		<div class='swiper-slide page_one'>
			<div class='wrapper'>
				<div class='animate_wrapper'>
					<img class='text animated' src="images/page1_text.png">
					<div class='name animated'>
						<div class='cn_name'>
							<strong class='god'>歌 神</strong>张学友
						</div>
						<div class='en_name'>jacky cheung</div>
					</div>
				</div>
			</div>
		</div>
		<div class='swiper-slide page_two'>
			<div class='wrapper'>
				<div class='container'>
					<p class='forever'>永远的</p>
					<img class='text' src='images/page2_text.png'>
				</div>
				<div class='award animated right'>
					<img class='img' width='66' height='455' src='images/award_1.png'>
					<img class='img' width='66' height='389' src='images/award_2.png'>
					<img class='img' width='68' height='286' src='images/award_3.png'>
				</div>
			</div>
		</div>
		<div class='swiper-slide page_three'>
			<div class='wrapper'>
				<div class='content_wrapper'>
					<div class='content sing_one'>
						<h4 class='name'>时间有泪</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_two'>
						<h4 class='name'>忘记你我做不到</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_three'>
						<h4 class='name'>不老的传说</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_four'>
						<h4 class='name'>你好毒</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_five'>
						<h4 class='name'>想和你去吹吹风</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_six'>
						<h4 class='name'>一千个伤心的理由</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_seven'>
						<h4 class='name'>一路上有你</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
					<div class='content sing_eight'>
						<h4 class='name'>吻别</h4>
						<div class='btn_wrapper'>
							<div class='btn'></div>
						</div>
					</div>	
				</div>
			</div>
		</div>
		<div class='swiper-slide page_four'>
			<div class='wrapper'>
				<div class='text_wrapper animated down'>
					<p class='text'>有人说，所谓歌神，也不过如此。<br>	
						 我不想反驳，只是想说，<br>	
						 我们的歌神，早已过了知天命的年纪，他是老了啊。<br>	
						 一个人一生，只来得及好好做一件事。<br>	
						 他这一生，只想好好唱歌。<br>	
						 而我，只愿你是那永不老去的传说。
					</p>
					<h1 class='name'>张学友</h1>
				</div>
			</div>	
		</div>
	</div>
	<div class='swiper-pagination'></div>
</div>
<script>
function animte(parent, child, classname, allFlag){
	let str = `${parent} ${child}`;
	let down = null;
	function clearClass(obj){
		setTimeout(() => {
			obj.classList.remove(classname)
		}, 500)
	}
	if(allFlag){
		down = document.querySelectorAll(str)
		Array.prototype.slice.call(down).forEach(item => {
			item.classList.toggle(classname)
			clearClass(item)
		})
	}else{
		down = document.querySelector(str)
		down.classList.add(classname)
		clearClass(down)
	}
}	
new Swiper('.swiper-container', {
	direction: 'vertical',
	grabCursor: true,
	preventClicks: false,
	preloadImages: false,
	pagination: {
		el: '.swiper-pagination',
		clickable: true
	},
	mousewheel: true,
	speed: 400,
	on: {
		init: function(){
			animte('.page_one', '.animated', 'bounceInDown', true)
		},
		slideChange: function(){
			if(this.activeIndex === 0){
				animte('.page_one', '.animated', 'bounceInDown', true)
			}else if(this.activeIndex === 1){
				animte('.page_two', '.animated', 'bounceInRight', false)
			}else if(this.activeIndex === 3){
				animte('.page_four', '.animated', 'bounceInDown', false)
			}
		}
	}
})


let content = document.querySelectorAll('.page_three .content');
let sings = [ 'resources/MP3/sing_one.mp3', 'resources/MP3/sing_two.mp3', 'resources/MP3/sing_three.mp3', 'resources/MP3/sing_four.mp3', 'resources/MP3/sing_five.mp3', 'resources/MP3/sing_six.mp3', 'resources/MP3/sing_seven.mp3', 'resources/MP3/sing_eight.mp3', ];
function Music(src){
	this.src = src;
	this.isPlay = false;
}
Music.prototype.play = function(){
	let audio = new Audio();
	audio.src = this.src;
	audio.play();
}
Array.prototype.slice.call(content).forEach((item, index) => {
	item.addEventListener('click', () => {
		let music = new Music(sings[index]);
		if(!this.isPlay){
			music.play();
			this.isPlay = true
		}
	})
})
</script>
</body>
</html>